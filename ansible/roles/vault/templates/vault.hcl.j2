{% set storage = vault_config.get('storage', {}) %}
{% set listener = vault_config.get('listener', {}) %}
storage "{{ storage.type | default('file') }}" {
  {% if storage.type == 'file' %}
  path = "{{ storage.path | default('/opt/vault/data') }}"
  {% else %}
  # add storage-specific config as needed
  {% endif %}
}

listener "tcp" {
  address     = "{{ listener.address | default('0.0.0.0:8200') }}"
  {% if listener.tls_disable | default(false) %}
  tls_disable = 1
  {% else %}
  tls_cert_file = "{{ listener.tls_cert_file }}"
  tls_key_file  = "{{ listener.tls_key_file }}"
  {% endif %}
}

disable_mlock = true
api_addr = "{{ vault_config.api_addr | default('http://0.0.0.0:8200') }}"
cluster_addr = "{{ vault_config.cluster_addr | default('http://0.0.0.0:8201') }}"
ui = {{ vault_config.ui | default(true) | lower }}

